##### 특정 시간에 한 번만 명령 실행하려면? #####

**1) at 명령어 설치 (필요시)**

```bash
sudo dnf install -y at
```

```tech
at,dnf
```

```desc
#### 📦 at 명령어 설치하기
지정한 시간에 한 번만 명령을 실행하게 해주는 `at` 유틸리티를 설치합니다.

- **`sudo dnf install -y`**: 관리자 권한으로 패키지를 자동으로 설치
- **`at`**: 일회성 작업을 예약하는 데 사용되는 패키지 이름

> 💡 `cron`이 주기적인 작업을 위한 것이라면, `at`은 '나중에 딱 한 번만' 실행하고 싶을 때 사용합니다.
```

**2) at 서비스 시작**

```bash
sudo systemctl start atd
```

```tech
at,systemctl
```

```desc
#### ▶️ at 서비스(atd) 시작하기
`at` 명령으로 예약된 작업을 실행하려면 `atd` 데몬(서비스)이 실행 중이어야 합니다.

- **`sudo systemctl start`**: systemd를 통해 서비스를 시작
- **`atd`**: `at` 작업을 처리하는 데몬의 이름

> 💡 시스템 부팅 시 자동으로 시작하게 하려면 `sudo systemctl enable atd` 명령을 사용합니다.
```

**3) at 서비스 상태확인**

```bash
sudo systemctl status atd
```
```no-err-check
```

```tech
at,systemctl
```

```desc
#### 📊 at 서비스 상태 확인
`atd` 서비스가 정상적으로 실행중인지 상태를 확인합니다.

- **`sudo systemctl status atd`**: `atd` 서비스의 현재 활동 상태, 로그 등을 보여줌

> 💡 `Active: active (running)`이라는 문구가 보이면 정상적으로 동작하고 있는 것입니다.
```

**4) 한국시간(Asia/Seoul) 설정**

```bash
sudo timedatectl set-timezone Asia/Seoul
```

```tech
timedatectl
```

```desc
#### 🌏 타임존을 서울로 설정
`at`이 정확한 시간에 동작하도록 시스템의 타임존을 한국(Asia/Seoul)으로 설정합니다.

- **`sudo timedatectl set-timezone`**: 시스템의 시간대를 변경하는 명령어

> 💡 서버의 시간이 정확하지 않으면 예약된 작업이 예상과 다른 시간에 실행될 수 있습니다.
```

**5) 한국시간(Asia/Seoul) 동기화**

```bash
sudo hwclock --hctosys
```

```tech
hwclock
```

```desc
#### ⏰ 하드웨어 시간 동기화
하드웨어 시간(RTC)을 시스템 시간과 동기화합니다.

- **`sudo hwclock --hctosys`**: 하드웨어 시계를 시스템 시계에 맞춤

> 💡 시스템 재부팅 시 시간 설정이 유지되도록 합니다.
```


**6) 현재시간 확인**

```bash
date
```

```tech
date
```

```desc
#### ⏰ 현재 시간 확인
`date` 명령어로 현재 시스템의 날짜와 시간이 올바르게 설정되었는지 최종 확인합니다.

- **`date`**: 현재 시스템의 날짜와 시간을 출력

> 💡 `KST` (Korea Standard Time)가 표시되면 한국 시간으로 잘 설정된 것입니다.
```

**7) 1분 후에 실행**

```bash
sudo echo 'echo "[at 실행됨] $(date)" >> /tmp/at_test.log' | at now + 1 minute
```

```tech
at
```

```desc
#### ⏱ 1분 후에 작업 예약하기
`at` 명령을 사용하여 지금으로부터 1분 뒤에 특정 명령(`echo ...`)을 실행하도록 예약합니다.

- **`echo '...'`**: 실행할 명령어를 문자열로 출력
- **`| at now + 1 minute`**: 파이프로 전달된 명령을 '현재 시간 + 1분'에 실행하도록 예약

> 💡 `at 5pm + 2 days` (모레 오후 5시), `at 10:00 2025-12-25` (특정 날짜) 와 같이 다양한 시간 형식을 사용할 수 있습니다.
```

**8) 예약된 작업 목록 확인**

```bash
atq
```

```tech
at
```

```desc
#### 📜 예약된 작업 목록 보기
`atq` (at queue) 명령어로 현재 `at`에 예약되어 대기 중인 작업 목록을 확인합니다.

- **`atq`**: `at` 작업 큐를 보여줌

> 💡 출력된 목록의 첫 번째 필드는 작업 번호(job ID)이며, `atrm <작업번호>` 명령으로 예약을 취소할 수 있습니다.
```

**9) 예약 작업결과 확인**

```bash
sudo cat /tmp/at_test.log
```

```tech
cat
```

```desc
#### ✅ 작업 실행 결과 확인
예약된 시간이 지난 후, `at` 작업이 정상적으로 실행되어 로그 파일(`/tmp/at_test.log`)을 생성했는지 확인합니다.

- **`cat /tmp/at_test.log`**: `at` 명령이 남긴 로그 파일의 내용을 출력

> 💡 파일에 `[at 실행됨]`과 함께 실행된 시간이 기록되어 있다면 성공입니다.
```
