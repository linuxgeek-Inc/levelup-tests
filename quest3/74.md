##### 도커 컨테이너끼리 통신 어떻게 하나요 ? #####

**1) 사용자 정의 브릿지 네트워크 생성**

* 컨테이너들이 서로 통신할 수 있는 가상 네트워크를 생성합니다.
* my-net 이라는 이름의 네트워크를 생성합니다.

```bash
docker network create my-net
```

```tech
docker network create
```
```desc
#### 🌐 컨테이너 통신용 가상 네트워크 생성하기
컨테이너들이 서로를 쉽게 찾고 통신할 수 있도록 사용자 정의 브릿지 네트워크를 생성합니다.
- **`docker network create`**: 새로운 도커 네트워크를 만드는 명령어
- **`my-net`**: 생성할 네트워크의 이름
> 💡 기본 네트워크와 달리, 사용자가 직접 만든 네트워크에 속한 컨테이너들은 서로의 이름을 사용해 통신할 수 있습니다. (DNS 자동 설정)
```

**2) 네트워크에 컨테이너 연결 및 실행**

* `--network` 옵션을 사용하여 생성한 my-net 네트워크에 컨테이너를 연결합니다.
* `--name` 옵션으로 컨테이너에 server라는 이름을 부여합니다. 이 이름이 다른 컨테이너에서 접근할 수 있는 호스트명이 됩니다.

```bash
docker run -d --name server --network my-net nginx:alpine
```
```no-err-check
unable
```

```tech
docker run
```
```desc
#### 🖥️ 'server' 컨테이너를 네트워크에 연결하여 실행하기
`--network` 옵션을 사용하여 'server' 역할을 할 컨테이너를 방금 만든 `my-net` 네트워크에 연결합니다.
- **`docker run -d`**: 컨테이너를 백그라운드에서 실행
- **`--name server`**: 컨테이너 이름을 'server'로 지정 (이것이 통신에 사용할 호스트명이 됨)
- **`--network my-net`**: `my-net` 네트워크에 연결
- **`nginx:alpine`**: 웹서버 역할을 할 이미지
> 💡 이제 `my-net`에 속한 다른 컨테이너들은 'server'라는 이름으로 이 컨테이너에 접근할 수 있습니다.
```

**3) 다른 컨테이너에서 이름으로 통신 확인**

* 동일한 my-net 네트워크에 client 컨테이너를 실행하여 server 컨테이너로 통신을 시도합니다.
* `wget -O - server` 명령어는 server 컨테이너의 80포트(nginx 기본)에 접속하여 html 문서를 가져옵니다.
* `--rm` 옵션으로 명령어 실행 후 컨테이너는 자동으로 삭제됩니다.

```bash
docker run --rm --network my-net alpine:latest wget -qO- http://server
```
```no-err-check
unable
```

```tech
docker run
```
```desc
#### 📡 'client' 컨테이너에서 'server'로 통신 확인하기
'client' 역할을 할 임시 컨테이너를 동일 네트워크에 실행시켜 'server' 컨테이너의 이름을 이용해 통신을 시도합니다.
- **`docker run --rm`**: 일회성으로 컨테이너를 실행하고 끝나면 바로 삭제
- **`--network my-net`**: `my-net` 네트워크에 연결하여 'server'를 찾을 수 있도록 함
- **`wget -qO- http://server`**: 'server'라는 호스트(컨테이너)에 접속하여 웹페이지 내용을 받아 화면에 출력
> 💡 'server' 컨테이너의 Nginx 기본 페이지 내용이 출력된다면 컨테이너 간 이름 기반 통신이 성공한 것입니다.
```
