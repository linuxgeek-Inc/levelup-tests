##### 포트번호 80번 충돌문제 어떻게 해결하죠?#####(guest open)

**1) Nginx 웹서버 설치**

```bash
sudo dnf install -y nginx
```

```tech
nginx,dnf
```

```desc
#### 📦 Nginx 웹서버 설치하기
`dnf` 패키지 매니저를 사용해 Nginx 웹서버를 설치합니다.

- **`sudo`**: 관리자 권한으로 명령어 실행
- **`dnf install`**: dnf를 이용해 패키지를 설치
- **`-y`**: 설치 과정에서 묻는 모든 질문에 자동으로 'yes'로 답함
- **`nginx`**: 설치할 패키지 이름

> 💡 포트 충돌을 테스트하기 위해 먼저 Nginx를 설치하여 80번 포트를 사용하도록 합니다.
```

**2) Nginx 웹서버 실행**

```bash
sudo systemctl start nginx
```

```tech
nginx,service
```

```desc
#### ▶️ Nginx 웹서버 실행하기
`systemctl`을 사용하여 Nginx 서비스를 시작합니다.

- **`sudo`**: 관리자 권한으로 명령어 실행
- **`systemctl start`**: 서비스를 시작하는 명령어
- **`nginx`**: 제어할 서비스의 이름

> 💡 이 명령으로 Nginx가 80번 포트를 사용하게 됩니다. `systemctl status nginx`로 실행 상태를 확인할 수 있습니다.
```

**3) 네트워크 확인 도구(net-tools) 설치**

```bash
sudo dnf install -y net-tools
```

```tech
dnf
```

```desc
#### 🛠 네트워크 도구 설치하기
`netstat` 명령어를 사용하기 위해 `net-tools` 패키지를 설치합니다.

- **`sudo`**: 관리자 권한으로 명령어 실행
- **`dnf install -y`**: `dnf`로 `net-tools` 패키지를 설치
- **`net-tools`**: `netstat`, `ifconfig` 등 기본적인 네트워크 관리 도구를 포함

> 💡 최신 시스템에서는 `ss` 명령어가 `netstat`을 대체하지만, `netstat`은 여전히 널리 사용됩니다.
```

**4) 웹서버 기본포트(80) 점유 상태 확인**

```bash
sudo netstat -tplan | grep 80
```

```tech
netstat
```

```desc
#### 🔍 80번 포트 점유 상태 확인
`netstat` 명령으로 어떤 프로세스가 80번 포트를 사용하고 있는지 확인합니다.

- **`sudo`**: 모든 네트워크 정보를 보기 위해 관리자 권한 사용
- **`netstat -tplan`**: TCP 포트(-t), 리스닝 상태(-l), 프로그램 이름(-p), 숫자 주소(-n) 표시
- **`| grep 80`**: 출력 결과에서 '80'이 포함된 줄만 필터링

> 💡 출력 결과에서 `nginx`가 80번 포트를 사용(LISTEN)하고 있음을 확인할 수 있습니다.
```

**5) Apache 웹서버(httpd) 설치**

```bash
sudo dnf install -y httpd
```

```tech
httpd,dnf
```

```desc
#### 📦 Apache 웹서버(httpd) 설치하기
포트 충돌을 발생시킬 두 번째 웹서버인 Apache(`httpd`)를 설치합니다.

- **`sudo dnf install -y`**: `dnf`로 `httpd` 패키지를 설치
- **`httpd`**: Apache HTTP Server의 패키지 이름

> 💡 Nginx와 Apache는 가장 널리 쓰이는 웹서버입니다.
```

**6) httpd 웹서버 실행 시도**

**- 참고:** `오류 메시지`가 출력되는것이 정상입니다.

```bash
sudo systemctl start httpd
```
```no-err-check
```

```tech
httpd,service
```

```desc
#### ⚠️ httpd 웹서버 실행 시도 (포트 충돌)
이미 Nginx가 80번 포트를 사용 중인 상태에서 `httpd`를 시작하려고 시도합니다.

- **`sudo systemctl start httpd`**: `httpd` 서비스 시작

> 💡 이 명령어는 80번 포트가 이미 사용 중이므로 실패하게 됩니다. 이것이 바로 '포트 충돌'입니다.
```

**7) httpd 웹서버 상태 확인 (포트 충돌 여부 확인)**

```bash
sudo systemctl status httpd
```
```no-err-check
```

```tech
httpd,service
```

```desc
#### 🚨 httpd 상태 확인으로 충돌 원인 파악
`httpd` 서비스가 왜 시작되지 않았는지 `systemctl status` 명령으로 확인합니다.

- **`sudo systemctl status httpd`**: `httpd` 서비스의 현재 상태와 로그를 보여줌

> 💡 로그 메시지에서 `(98)Address already in use: AH00072: make_sock: could not bind to address :80` 와 같은 에러를 통해 80번 포트 충돌이 원인임을 명확히 알 수 있습니다.
```

**8) 현재 80 포트번호 점유중인 nginx 프로세스 확인**

```bash
sudo netstat -tplan | grep 80
```

```tech
netstat
```

```desc
#### 🔍 80번 포트 점유 프로세스 재확인
`netstat` 명령으로 어떤 프로세스가 80번 포트를 사용하고 있는지 다시 확인하여 문제를 명확히 합니다.

- **`sudo netstat -tplan`**: TCP 포트(-t), 리스닝 상태(-l), 프로그램 이름(-p), 숫자 주소(-n)를 다시 표시
- **`| grep 80`**: 출력 결과에서 '80'이 포함된 줄만 필터링

> 💡 이 단계는 문제 해결 전 원인을 명확히 파악하는 습관을 기르는 데 도움이 됩니다. `nginx`가 원인임을 다시 한번 확인합니다.
```

**9) 80 포트번호 점유중인 nginx 프로세스 종료**

```bash
sudo systemctl stop nginx
```

```tech
nginx,service
```

```desc
#### 🛑 Nginx 웹서버 종료하기
포트 충돌의 원인인 Nginx 서비스를 중지하여 80번 포트를 해제합니다.

- **`sudo systemctl stop`**: 서비스를 중지하는 명령어
- **`nginx`**: 중지할 서비스의 이름

> 💡 서비스를 중지하면 해당 서비스가 사용하던 모든 포트가 해제되어 다른 프로그램이 사용할 수 있게 됩니다.
```

**10) httpd 웹서버 재실행**

```bash
sudo systemctl start httpd
```

```tech
httpd,service
```

```desc
#### ▶️ httpd 웹서버 재실행하기
이제 80번 포트가 비어 있으므로, Apache 웹서버(`httpd`)를 다시 시작합니다.

- **`sudo systemctl start httpd`**: `httpd` 서비스 시작

> 💡 이전과 달리 포트 충돌이 없으므로 이번에는 명령이 성공적으로 실행됩니다.
```

**11) httpd 웹서버 상태 점검**

```bash
sudo systemctl status httpd
```

```tech
httpd,service
```

```desc
#### ✅ httpd 웹서버 상태 점검하기
`httpd` 서비스가 정상적으로 실행되었는지 상태를 확인합니다.

- **`sudo systemctl status httpd`**: `httpd` 서비스의 현재 상태와 최근 로그를 표시

> 💡 출력에서 `Active: active (running)`이라는 문구를 통해 서비스가 성공적으로 실행 중임을 확인할 수 있습니다.
```

**12) 현재 80 포트번호 점유중인 httpd 프로세스 확인**

```bash
sudo netstat -tplan | grep 80
```

```tech
netstat
```

```desc
#### 🔍 최종 확인: 80번 포트 점유 프로세스
마지막으로 `netstat`을 실행하여 이제 `httpd`가 80번 포트를 정상적으로 사용하고 있는지 확인합니다.

- **`sudo netstat -tplan | grep 80`**: 80번 포트를 사용하는 프로세스를 다시 확인

> 💡 이제 출력 결과에서 `nginx` 대신 `httpd`가 80번 포트를 점유하고 있는 것을 볼 수 있습니다. 이로써 포트 충돌 문제가 해결되었습니다.
```
