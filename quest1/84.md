##### Rocky 모든 패키지를 최신 상태로 업데이트하려면?#####

**1) 업그레이드 가능한 패키지 개수 확인**

```bash
sudo dnf list --upgrades --refresh | sed '1,/^Available Upgrades$/d' | wc -l
```

```tech
dnf, sed, wc
```

```desc
#### 📦 업그레이드 가능한 패키지 `개수` 파악
메타데이터를 새로고침한 뒤(`--refresh`), `dnf list --upgrades` 출력에서 헤더(`Available Upgrades`) 아래의 실제 항목만 남겨 `wc -l`로 개수를 셉니다.

- **`sed '1,/^Available Upgrades$/d'`**: 헤더 영역 제거
- **`wc -l`**: 남은 패키지 행 수(=업그레이드 대상 개수)
```

**2) 업그레이드 가능한 패키지 목록 확인**

```bash
sudo dnf list --upgrades --refresh | sed '1,/^Available Upgrades$/d'
```

```no-err-check
```

```tech
dnf, sed
```

```desc
#### 📋 업그레이드 가능한 패키지 `목록` 보기
헤더를 제거해 실제 업그레이드 대상만 표시합니다. 각 행에 `패키지명.arch  버전  리포지토리` 형식으로 출력됩니다.

> 💡 플러그인 환경에 따라 `dnf repoquery --upgrades`로도 심플한 목록을 얻을 수 있습니다.
```

**3) 모든 패키지를 최신으로 업데이트**

**- 참고:** `패키지 버전 업그레이드` 작업시간이 **약5분이상** 소요됩니다.

```bash
sudo dnf update -y
```

```tech
dnf
```

```no-err-check
```

```desc
#### 🔄 시스템 전체 패키지 업데이트하기
`dnf update`는 설치된 패키지를 사용 가능한 최신 버전으로 올립니다.

- **`sudo`**: 시스템 전역 변경이므로 필요
- **`-y`**: 모든 질의에 자동으로 yes
> 💡 `dnf upgrade`와 동작이 같습니다.
```

**4) 방금 설치/업데이트된 패키지(버전 포함) 확인**

```bash
sudo dnf history info last
```

```no-err-check
```

```tech
dnf
```

```desc
#### 🧾 최신 트랜잭션 상세 보기
가장 최근 업데이트 트랜잭션의 패키지 목록과 **이전→신규 버전**이 함께 표시됩니다.
- **`history info last`**: 마지막 트랜잭션의 ‘Packages Altered’ 섹션에서 변경된 패키지와 버전 정보 확인
```

**5) 현재 시스템에 설치된 모든 패키지와 버전 목록 확인**

```bash
rpm -qa --qf '%{NAME}-%{VERSION}-%{RELEASE}.%{ARCH}\n' | sort
```

```no-err-check
```

```tech
rpm, sort
```

```desc
#### 🗂 전체 설치 패키지 인벤토리
시스템에 **설치된 모든 패키지**를 `이름-버전-릴리스.arch` 형식으로 정렬해 확인합니다.
- 업데이트 후 전체 현황을 스냅샷처럼 남기고 싶을 때 유용
```
