##### 부팅시점 마다 명령어 실행 어떻게 하나요 ? #####

**1) 부팅 시마다 로그 기록하도록 crontab 수정하기**

```bash
(crontab -l 2>/dev/null; echo '@reboot echo "Booted at $(date)" >> /tmp/reboot_test.log') | crontab -
```

```tech
crontab
```

```desc
#### 🕒 부팅 시마다 작업 자동 실행 설정 (crontab)
시스템이 재부팅될 때마다 특정 명령어를 실행하도록 `crontab`에 `@reboot` 작업을 추가합니다.

- **`crontab -l 2>/dev/null`**: 현재 설정된 crontab 목록을 출력합니다. 오류(crontab이 없을 경우)는 무시합니다.
- **`;`**: 앞의 명령이 끝나면 뒤의 명령을 실행합니다.
- **`echo '@reboot ...'`**: `@reboot`으로 시작하는 새로운 cron 작업을 문자열로 출력합니다.
- **`@reboot`**: 시스템이 부팅될 때 명령을 실행하도록 지정하는 특수 시간 설정입니다.
- **`| crontab -`**: 파이프를 통해 전달된 내용을 새로운 crontab으로 등록합니다.

> 💡 `@reboot`는 시스템 시작 시 실행되어야 하는 서비스 스크립트나 초기화 작업을 등록할 때 매우 유용합니다.
```

**2) rc.local 실행 권한 부여**

```bash
sudo chmod +x /etc/rc.d/rc.local
```

```tech
chmod
```

```desc
#### 🔑 rc.local 파일에 실행 권한 부여
구형 리눅스 시스템에서 호환성을 위해 사용되는 `/etc/rc.d/rc.local` 파일에 실행 권한을 부여하여, 부팅 시 이 파일의 내용이 실행될 수 있도록 합니다.

- **`sudo chmod +x`**: 관리자 권한으로 파일에 실행(`x`) 권한을 추가(`+`)합니다.
- **`/etc/rc.d/rc.local`**: 부팅 마지막 단계에서 실행되는 스크립트 파일입니다.

> 💡 최신 시스템에서는 `systemd` 서비스 사용이 권장되지만, 간단한 스크립트를 부팅 시 실행하고 싶을 때 `rc.local`은 여전히 간편한 방법이 될 수 있습니다.
```


**3-1) rc.local에 실행할 명령어를 임시 스크립트 파일에 작성**

```bash
echo -n 'echo "rc.local executed at $(date)" ' > ~/rclocal_temp.sh
```

```tech
bash
```

```desc
#### 📝 실행할 명령어 스크립트 파일 생성 (1단계)
`rc.local`에 추가할 명령어의 첫 부분을 임시 스크립트 파일에 작성합니다.

- **`echo -n '...'`**: 문자열을 출력하되, 끝에 줄바꿈을 추가하지 않습니다.
- **`> ~/rclocal_temp.sh`**: 출력 결과를 `rclocal_temp.sh` 파일에 덮어씁니다.

> 💡 복잡한 명령어를 파일에 추가할때, 이렇게 임시 파일을 만들어 단계적으로 구성하면 실수를 줄일 수 있습니다.
```

**3-2) 명령어에 로그 파일 경로 추가**  

```bash
echo ">> /tmp/rclocal_test.log" >> ~/rclocal_temp.sh
```

```tech
bash
```

```desc
#### 📜 로그 파일 경로 추가 (2단계)
앞서 만든 임시 스크립트 파일에 로그를 저장할 파일 경로를 이어서 추가합니다.

- **`echo "..."`**: 문자열을 출력합니다.
- **`>> ~/rclocal_temp.sh`**: 출력 결과를 `rclocal_temp.sh` 파일의 끝에 덧붙입니다.

> 💡 `>`는 파일을 덮어쓰고, `>>`는 파일 끝에 내용을 추가합니다. 이 차이를 잘 이해하는 것이 중요합니다.
```

**4) rc.local에 임시 파일의 내용을 추가**

```bash
sudo cat ~/rclocal_temp.sh | sudo tee -a /etc/rc.d/rc.local > /dev/null
```

```tech
tee
```

```desc
#### ➕ rc.local에 스크립트 내용 추가 (3단계)
완성된 임시 스크립트 파일의 내용을 `rc.local` 파일 끝에 추가합니다.

- **`sudo cat ~/rclocal_temp.sh`**: 임시 파일의 내용을 관리자 권한으로 읽습니다.
- **`| sudo tee -a /etc/rc.d/rc.local`**: 파이프로 전달된 내용을 화면과 파일(`rc.local`)에 동시에 씁니다. `-a` 옵션은 덧붙이기 입니다.
- **`> /dev/null`**: `tee`가 화면에 출력하는 내용은 버립니다.

> 💡 `sudo` 권한이 필요한 파일에 내용을 추가할 때 `sudo tee -a`는 `>>` 리디렉션이 권한 문제로 실패하는 경우에 유용한 대안입니다.
```

**5) 임시 스크립트 파일 삭제**

```bash
rm ~/rclocal_temp.sh
```

```tech
bash
```

```desc
#### 🗑 임시 파일 삭제 (마무리)
작업에 사용했던 임시 스크립트 파일을 삭제하여 깔끔하게 정리합니다.

- **`rm`**: 파일을 삭제하는 명령어입니다.
- **`~/rclocal_temp.sh`**: 삭제할 파일의 경로입니다.

> 💡 스크립트 작업이 끝난 후 불필요한 임시 파일을 삭제하는 것은 좋은 습관입니다.
```