##### 도커 컨테이너 CPU, 메모리 제한 어떻게 하나요? #####

**1) 메모리 제한하여 컨테이너 실행**

* `--memory` 또는 `-m` 옵션으로 컨테이너가 사용할 수 있는 최대 메모리를 제한합니다.
* 아래 예시는 메모리를 256MB로 제한합니다.

```bash
docker run -d --name limited-mem-container --memory="256m" nginx:alpine
```
```no-err-check
unable
```
```tech
docker run
```
```desc
#### 🧠 메모리 사용량 제한하여 컨테이너 실행하기
`--memory` 옵션을 사용하여 컨테이너가 사용할 수 있는 최대 메모리 양을 제한합니다.
- **`--memory="256m"`**: 컨테이너의 메모리 사용을 최대 256MB로 제한
- **`m`**: 메가바이트(MB) 단위 (g: 기가바이트, k: 킬로바이트)
> 💡 특정 컨테이너가 메모리를 과도하게 사용하여 시스템 전체에 영향을 주는 것을 방지할 수 있습니다.
```

**2) CPU 제한하여 컨테이너 실행**

* `--cpus` 옵션으로 컨테이너가 사용할 수 있는 CPU 코어의 개수를 제한합니다.
* 아래 예시는 CPU 코어를 0.5개(50%)만 사용하도록 제한합니다.

```bash
docker run -d --name limited-cpu-container --cpus="0.5" nginx:alpine
```

```tech
docker run
```
```desc
#### ⚙️ CPU 사용량 제한하여 컨테이너 실행하기
`--cpus` 옵션을 사용하여 컨테이너가 사용할 수 있는 CPU 코어의 수를 제한합니다.
- **`--cpus="0.5"`**: 컨테이너가 최대 0.5개(50%)의 CPU 코어만 사용하도록 제한
> 💡 여러 컨테이너가 하나의 호스트에서 실행될 때, 중요한 컨테이너에 더 많은 CPU 자원을 할당하고 덜 중요한 컨테이너의 자원 사용은 제한하는 등 효율적인 자원 관리가 가능해집니다.
```

**3) CPU와 메모리 제한을 함께 적용하여 실행**

* 두 옵션을 함께 사용하여 CPU와 메모리 사용량을 모두 제한할 수 있습니다.

```bash
docker run -d --name limited-all-container --memory="256m" --cpus="0.5" nginx:alpine
```

```tech
docker run
```
```desc
#### 🛠️ CPU와 메모리 제한 함께 적용하기
CPU와 메모리 제한 옵션을 함께 사용하여 컨테이너의 자원 사용을 종합적으로 제어합니다.
- **`--memory="256m"`**: 메모리를 256MB로 제한
- **`--cpus="0.5"`**: CPU를 0.5개로 제한
> 💡 이렇게 두 가지 옵션을 함께 사용하면 컨테이너가 사용할 수 있는 시스템 자원의 상한선을 명확하게 설정할 수 있습니다.
```

**4) 컨테이너 자원 사용량 확인**

* `docker stats` 명령어로 실행 중인 컨테이너의 실시간 자원 사용량을 확인할 수 있습니다.
* `--no-stream` 옵션은 실시간 스트리밍 없이 현재 상태만 한번 출력합니다.

```bash
docker stats --no-stream limited-mem-container limited-cpu-container limited-all-container
```

```tech
docker stats
```
```desc
#### 📊 컨테이너 자원 사용량 확인하기
`docker stats` 명령어로 실행 중인 컨테이너들의 실시간 자원 사용 현황(CPU, 메모리 등)을 확인합니다.
- **`docker stats`**: 컨테이너 자원 사용 통계를 실시간으로 보여줌
- **`--no-stream`**: 실시간으로 계속 보여주지 않고 현재 상태만 한 번 출력하고 종료
> 💡 `MEM USAGE / LIMIT` 와 `CPU %` 항목을 통해 각 컨테이너가 설정된 제한 내에서 자원을 사용하고 있는지 확인할 수 있습니다.
```

**5) 실습 종료**

```bash
: quit
```

```tech
bash,rocky
```

```desc
#### 👋 실습 종료
실습을 종료를 의미하는 `quit` 명령어를 실행합니다.
현재 터미널 세션을 종료합니다.

> 💡 모든 실습을 마친 후 사용합니다.
```