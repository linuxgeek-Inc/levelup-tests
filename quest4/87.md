##### K8s: Nginx Pod 웹 서버 정상 구동 확인 방법 #####

**1) Nginx Pod 생성**
```bash
kubectl run nginx-pod --image=nginx
```
```tech
bash,kubectl,kubernetes
```
```desc
#### 🚀 Nginx Pod 생성하기
테스트를 위해 Nginx 이미지를 사용하는 단일 Pod를 생성합니다.

- **`kubectl run`**: Pod를 생성하고 실행하는 간단한 방법입니다.
- **`nginx-pod`**: 생성될 Pod의 이름입니다.
- **`--image=nginx`**: Pod에서 사용할 컨테이너 이미지입니다.

> 💡 `kubectl run`은 주로 간단한 테스트용 Pod를 만들 때 사용하며, Deployment를 통해 생성하는 것이 일반적입니다.
```

**2) Pod가 Running 할때까지 wait**
```bash
kubectl wait --for=condition=Ready pod/nginx-pod --timeout=60s
```
```tech
kubectl
```
```desc
#### ⏳ Pod 준비 대기
Pod가 완전히 생성되어 'Ready' 상태가 될 때까지 기다립니다.

- **`kubectl wait`**: 특정 조건이 충족될 때까지 대기하는 명령어입니다.
- **`--for=condition=Ready`**: Pod의 상태가 'Ready'가 될 때까지 기다립니다.
- **`pod/nginx-pod`**: 대기할 대상 Pod입니다.
- **`--timeout=60s`**: 최대 60초까지만 기다립니다.

> ⚠️ Pod가 정상적으로 뜨지 않으면 다음 단계로 진행되지 않으므로, 스크립트 작성 시 유용합니다.
```

**3) Pod 상태 모니터링**
```bash
timeout 10 watch kubectl get pod nginx-pod -o wide
```
```tech
bash,kubectl,kubernetes,watch
```
```desc
#### 👀 Pod 상태 모니터링
10초 동안 Pod의 상태를 실시간으로 관찰합니다.

- **`watch`**: 주기적으로 명령어를 실행하여 변경 사항을 보여줍니다.
- **`kubectl get pod`**: Pod의 상태를 조회합니다.
- **`-o wide`**: Pod IP, 실행 중인 노드 등 추가 정보를 표시합니다.
- **`timeout 10`**: 10초 후에 `watch` 명령을 자동 종료합니다.

> 💡 `STATUS`가 `Running`으로 표시되는지 확인하는 것이 중요합니다.
```

**4) Pod 로그 확인**
```bash
kubectl logs nginx-pod
```
```tech
bash,kubectl,kubernetes
```
```desc
#### 📜 Pod 로그 확인하기
Pod 내부에서 실행되는 컨테이너의 표준 출력 로그를 확인합니다.

- **`kubectl logs`**: 컨테이너의 로그를 조회하는 명령어입니다.
- **`nginx-pod`**: 로그를 확인할 Pod의 이름입니다.

> 💡 애플리케이션이 정상적으로 시작되었는지, 오류는 없는지 확인할 때 가장 먼저 사용하는 명령어 중 하나입니다.
```

**5) 로컬 포트와 Pod 포트 포워딩(백그라운드 실행)**
```bash
kubectl port-forward pod/nginx-pod 8080:80 > /dev/null 2>&1 &
```
```tech
bash,kubectl,kubernetes
```
```desc
#### 🔗 로컬-Pod 포트 포워딩
내 컴퓨터(로컬)의 특정 포트와 Pod의 포트를 연결하여 외부에서 접속할 수 있도록 합니다.

- **`kubectl port-forward`**: 포트를 전달하는 명령어입니다.
- **`pod/nginx-pod`**: 대상 Pod입니다.
- **`8080:80`**: 로컬의 8080 포트를 Pod의 80 포트로 연결합니다.
- **`> /dev/null 2>&1 &`**: 출력을 무시하고 백그라운드에서 실행하여 터미널을 계속 사용할 수 있게 합니다.

> 💡 Service를 생성하지 않고 임시로 Pod에 접속하여 테스트할 때 매우 유용합니다.
```

**6) 포트 포워딩 접속 테스트**
```bash
curl http://localhost:8080
```
```tech
bash,curl
```
```desc
#### ✅ 포트 포워딩 접속 테스트
포트 포워딩이 잘 되었는지 `curl`을 이용해 확인합니다.

- **`curl`**: URL로 HTTP 요청을 보내는 명령어입니다.
- **`http://localhost:8080`**: 내 컴퓨터의 8080 포트로 접속을 시도합니다.

> 💡 Nginx의 기본 환영 페이지가 보이면 성공적으로 연결된 것입니다.
```

**7) 실습 자원 정리**
```bash
kubectl delete pod nginx-pod
```
```tech
bash,kubectl,kubernetes
```
```desc
#### 🧹 실습 자원 정리
실습에 사용된 Pod를 삭제합니다.

- **`kubectl delete pod`**: Pod를 삭제하는 명령어입니다.
- **`nginx-pod`**: 삭제할 Pod의 이름입니다.

> 💡 실습이 끝나면 불필요한 리소스를 정리하여 클러스터 자원을 깨끗하게 유지하는 것이 좋습니다.
```

**8) 실습 종료**

```bash
: quit
```

```tech
bash,rocky
```

```desc
#### 👋 실습 종료
실습을 종료를 의미하는 `quit` 명령어를 실행합니다.
현재 터미널 세션을 종료합니다.

> 💡 모든 실습을 마친 후 사용합니다.
```