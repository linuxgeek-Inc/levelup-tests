##### 파일 읽기권한 문제해결 (Permission denied)#####

**1) 'reader' 사용자를 생성합니다.**
```bash
sudo useradd reader
```
```tech
useradd
```

```desc
#### 👤 실습용 사용자 생성하기
`useradd` 명령어로 `reader`라는 이름의 새 사용자를 만듭니다. 권한 테스트에 사용됩니다.

- **`sudo`**: 사용자 생성은 관리자 권한이 필요합니다.
- **`useradd reader`**: `reader`라는 사용자를 생성합니다.

> 💡 권한 문제를 시뮬레이션하기 위해 현재 사용자와 다른 사용자를 만드는 것입니다.
```

**2) 'reader' 사용자로 파일을 생성합니다.**

```bash
sudo -u reader touch /tmp/secret.txt
```
```tech
sudo,touch
```

```desc
#### 📝 특정 사용자로 파일 생성하기
`sudo -u`를 이용해 `reader` 사용자의 권한으로 `/tmp` 디렉터리에 비밀 파일을 생성합니다.

- **`sudo -u reader`**: `reader` 사용자로 다음 명령을 실행합니다.
- **`touch /tmp/secret.txt`**: `secret.txt`라는 빈 파일을 생성합니다.

> 💡 이렇게 하면 파일의 소유자가 `reader`가 되어 다른 사용자는 접근할 수 없는 상황을 만들 수 있습니다.
```

**3) 파일 권한을 소유자만 읽고 쓸 수 있도록 변경합니다.**
```bash
sudo -u reader chmod 600 /tmp/secret.txt
```
```tech
sudo,chmod
```

```desc
#### 🔒 소유자 전용 권한으로 변경
`chmod`를 사용해 파일 권한을 `600`으로 설정합니다. 오직 소유자(`reader`)만 읽고 쓸 수 있습니다.

- **`chmod 600`**: 소유자에게 읽기(4)+쓰기(2) 권한만 부여하고, 그룹이나 다른 사용자에겐 아무 권한도 주지 않습니다.
- **`rwx`** -> `421` (읽기=4, 쓰기=2, 실행=1)

> 💡 `600`은 개인적인 파일에 흔히 사용되는 매우 제한적인 권한 설정입니다.
```

**4) 파일의 권한을 확인합니다.**
```bash
ls -l /tmp/secret.txt
```
```tech
ls
```

```desc
#### 👀 권한 확인하기
`ls -l`로 파일의 권한이 `-rw-------` 형태로 변경되었는지 확인합니다.

- **`ls -l`**: 파일의 상세 정보를 출력합니다.

> 💡 소유자인 `reader` 외에는 아무도 접근할 수 없는 상태입니다.
```

**5) 현재 사용자로 파일을 읽으려고 시도합니다.**
```bash
cat /tmp/secret.txt
```
```no-err-check
```
```tech
cat
```

```desc
#### 🚫 접근 거부(Permission denied) 확인
현재 사용자(소유자가 아닌)가 파일을 읽으려고 시도합니다.

- **`cat`**: 파일 내용을 출력하는 명령어

> 💡 이 명령은 "Permission denied" 오류를 발생시킵니다. 파일에 대한 읽기 권한이 없기 때문입니다.
```

**6) 다른 사용자에게 읽기 권한을 부여합니다.**
```bash
sudo chmod o+r /tmp/secret.txt
```
```tech
chmod
```

```desc
#### 🔓 다른 사용자에게 읽기 권한 부여
`chmod`를 이용해 다른 모든 사용자(others)에게 읽기(read) 권한을 추가합니다.

- **`chmod o+r`**: 다른 사용자(o)들에게 읽기(r) 권한을 추가(+)합니다.

> 💡 이 방법은 모든 사용자에게 공개되어도 되는 파일에 사용될 수 있습니다.
```

**7) 변경된 파일의 권한을 확인합니다.**
```bash
ls -l /tmp/secret.txt
```
```tech
ls
```

```desc
#### ✅ 권한 변경 확인
`ls -l`로 권한이 `-rw----r--`와 같이 변경되었는지 확인합니다.

- **`ls -l`**: 파일 상세 정보 출력

> 💡 이제 마지막 `r`이 생겨 다른 사용자도 파일을 읽을 수 있게 되었습니다.
```

**8) 다시 파일을 읽어봅니다.**
```bash
cat /tmp/secret.txt
```
```tech
cat
```

```desc
#### 👍 읽기 성공 확인
다시 `cat` 명령어로 파일을 읽어봅니다.

- **`cat`**: 파일 내용 출력

> 💡 이번에는 오류 없이 파일 내용(비어있음)이 성공적으로 출력되어야 합니다.
```

**9) 파일 권한을 소유자는 읽기/쓰기, 그룹은 읽기만 가능하도록 변경합니다.**
```bash
sudo chmod 640 /tmp/secret.txt
```
```tech
chmod
```

```desc
#### 🔐 그룹 권한으로 재설정
`chmod 640`을 이용해 소유자는 읽기/쓰기(6), 그룹은 읽기(4), 다른 사용자는 아무 권한 없음(0)으로 설정합니다.

- **`chmod 640`**: 소유자=rw, 그룹=r, 기타=---

> 💡 특정 그룹에게만 제한적으로 정보를 공유할 때 사용하는 일반적인 권한 설정입니다.
```

**10) 파일의 그룹을 'reader'로 변경합니다.**
```bash
sudo chgrp reader /tmp/secret.txt
```
```tech
chgrp
```

```desc
#### 👨‍👩‍👧‍👦 파일 소유 그룹 변경
`chgrp`으로 파일의 소유 그룹을 `reader` 그룹으로 변경합니다.

- **`chgrp reader`**: 소유 그룹을 `reader`로 변경

> 💡 이제 `reader` 그룹에 속한 사용자들은 이 파일에 대해 그룹 권한(읽기)을 갖게 됩니다.
```

**11) 변경된 파일의 권한을 확인합니다.**
```bash
ls -l /tmp/secret.txt
```
```tech
ls
```

```desc
#### ✅ 그룹 및 권한 최종 확인
`ls -l`로 소유 그룹과 권한이 `-rw-r-----`로 잘 설정되었는지 확인합니다.

- **`ls -l`**: 파일 상세 정보 출력

> 💡 이제 `reader` 그룹의 멤버가 되면 파일을 읽을 수 있습니다.
```

**12) 현재 사용자를 'reader' 그룹에 추가합니다.**
```bash
sudo usermod -aG reader $USER
```
```tech
usermod
```

```desc
#### ➕ 사용자를 그룹에 추가하기
`usermod`를 이용해 현재 사용자(`$USER`)를 `reader` 그룹에 추가합니다.

- **`usermod`**: 사용자 계정 정보를 수정합니다.
- **`-aG reader`**: `reader` 그룹에 사용자를 추가(`a`ppend)합니다. 기존 그룹은 유지됩니다.
- **`$USER`**: 현재 로그인된 사용자 이름을 나타내는 환경 변수입니다.

> 💡 `-a` 옵션 없이 `-G`만 사용하면 기존 그룹에서 빠지고 새 그룹에만 속하게 되니 주의해야 합니다.
```

**13) 변경된 그룹 정보를 적용합니다.**
```bash
newgrp reader
```
```tech
newgrp
```

```desc
#### 🔄 변경된 그룹 정보 적용하기
`newgrp` 명령어를 실행하여 현재 셸 세션에 변경된 그룹 정보를 즉시 적용합니다.

- **`newgrp reader`**: `reader` 그룹을 기본 그룹으로 하는 새로운 셸을 시작합니다.

> 💡 그룹 변경 사항은 보통 로그아웃 후 다시 로그인해야 적용되지만, `newgrp`을 사용하면 바로 적용할 수 있습니다.
```

**14) 이제 파일을 읽을 수 있습니다.**
```bash
cat /tmp/secret.txt
```
```tech
cat
```

```desc
#### 👍 그룹 권한으로 읽기 성공
`reader` 그룹의 멤버가 되었으므로 이제 파일을 성공적으로 읽을 수 있습니다.

- **`cat`**: 파일 내용 출력

> 💡 그룹을 통한 권한 관리가 효과적으로 작동함을 보여줍니다.
```

**15) 실습 후 생성한 'reader' 사용자를 삭제합니다.**
```bash
sudo userdel -r reader
```
```tech
userdel
```

```desc
#### 🗑️ 실습 사용자 삭제
`userdel -r`로 실습에 사용한 `reader` 사용자와 홈 디렉터리를 함께 삭제합니다.

- **`userdel -r`**: 사용자와 관련 데이터를 모두 삭제합니다.

> 💡 실습 환경을 깨끗하게 정리합니다.
```

**16) 실습 후 생성한 파일을 삭제합니다.**
```bash
sudo rm /tmp/secret.txt
```
```tech
rm
```

```desc
#### 🗑️ 실습 파일 삭제
`rm`으로 실습에 사용한 `secret.txt` 파일을 삭제합니다.

- **`rm`**: 파일 삭제

> 💡 불필요한 임시 파일을 남기지 않도록 합니다.
```

**17) newgrp으로 생긴 새로운 셸을 종료합니다.**
```bash
exit
```
```tech
exit
```

```desc
#### 🚪 새로운 셸 종료하기
`exit` 명령어로 `newgrp`을 통해 생성되었던 새로운 셸을 종료하고 원래의 셸로 돌아갑니다.

- **`exit`**: 현재 셸 세션 종료

> 💡 `newgrp`을 실행하면 새로운 셸 환경에 들어가게 되므로, 작업이 끝나면 `exit`으로 빠져나와야 합니다.
```

**18) 실습 종료**

```bash
: quit
```

```tech
bash,rocky
```

```desc
#### 👋 실습 종료
실습을 종료를 의미하는 `quit` 명령어를 실행합니다.
현재 터미널 세션을 종료합니다.

> 💡 모든 실습을 마친 후 사용합니다.
```