##### Dockerfile로 이미지 만들려면? #####

**1-1) Dockerfile을 저장할 디렉토리 생성**

* 이미지 빌드를 위한 작업 공간을 만듭니다.

```bash
mkdir -p ~/my-docker-build
```

```tech
mkdir
```
```desc
#### 📂 이미지 빌드용 디렉토리 생성하기
Dockerfile과 관련 파일들을 저장할 작업 디렉토리를 생성합니다.
- **`mkdir -p`**: 디렉토리를 생성하며, 필요시 상위 디렉토리도 함께 생성
- **`~/my-docker-build`**: 홈 디렉토리 아래에 'my-docker-build' 이름으로 생성
> 💡 Dockerfile을 빌드할 때는 보통 별도의 디렉토리에서 작업하는 것이 좋습니다. 이를 '빌드 컨텍스트'라고 부릅니다.
```

**1-2) Dockerfile을 저장할 디렉토리로 이동**

* 이미지 빌드를 위해서 만든 디렉토리로 이동합니다.

```bash
cd ~/my-docker-build
```

```tech
cd
```
```desc
#### ➡️ 작업 디렉토리로 이동하기
`cd` 명령어를 사용하여 방금 만든 이미지 빌드용 디렉토리로 이동합니다.
- **`cd`**: 'Change Directory'의 약자로, 현재 위치를 다른 디렉토리로 변경
- **`~/my-docker-build`**: 이동할 목표 디렉토리 경로
> 💡 앞으로의 작업은 모두 이 디렉토리 안에서 이루어집니다.
```

**2) Dockerfile 작성**

* alpine 리눅스를 기반으로 하고, 실행 시 "Hello Docker!"를 출력하는 간단한 이미지의 Dockerfile을 작성합니다.
* 아래 명령어는 `cat`과 `EOF`를 이용하여 Dockerfile을 생성합니다.

```bash
cat <<EOF > Dockerfile
FROM alpine:latest
CMD ["echo", "Hello Docker!"]
EOF
```

```tech
cat
```
```desc
#### ✍️ Dockerfile 작성하기
`cat`과 'Here Document'(<<EOF ... EOF)를 이용해 간단한 Dockerfile을 생성합니다.
- **`cat <<EOF > Dockerfile`**: `EOF`가 나올 때까지의 모든 내용을 `Dockerfile`이라는 파일에 덮어씀
- **`FROM alpine:latest`**: `alpine:latest` 이미지를 기반으로 새 이미지를 만듦
- **`CMD ["echo", "Hello Docker!"]`**: 컨테이너가 실행될 때 `echo "Hello Docker!"` 명령을 실행
> 💡 Dockerfile은 도커 이미지를 만들기 위한 설계도와 같습니다. 이 파일에 원하는 작업을 순서대로 기록합니다.
```

**3) Dockerfile로 이미지 빌드**

* `docker build -t [이미지 이름:태그] [Dockerfile 경로]` 명령어로 이미지를 빌드합니다.
* -t 옵션으로 이미지의 이름과 태그를 지정합니다.
* `.` 은 현재 디렉토리에 있는 Dockerfile을 사용하라는 의미입니다.

```bash
docker build -t my-hello-image:1.0 .
```
```no-err-check
```

```tech
docker build
```
```desc
#### 🛠️ Dockerfile로 이미지 빌드하기
`docker build` 명령어를 사용하여 Dockerfile을 기반으로 실제 도커 이미지를 생성합니다.
- **`docker build`**: 이미지를 빌드하는 명령어
- **`-t my-hello-image:1.0`**: 이미지의 이름(my-hello-image)과 태그(1.0)를 지정
- **`.`**: Dockerfile이 있는 위치(빌드 컨텍스트)를 현재 디렉토리로 지정
> 💡 빌드가 성공하면 로컬에 `my-hello-image:1.0`이라는 새로운 이미지가 생성됩니다. `docker images` 명령어로 확인할 수 있습니다.
```

**4) 빌드된 이미지 실행**

* 방금 만든 이미지로 컨테이너를 실행하여 "Hello Docker!"가 출력되는지 확인합니다.

```bash
docker run --rm my-hello-image:1.0
```

```tech
docker run
```
```desc
#### ✅ 빌드된 이미지 실행하여 확인하기
`docker run`으로 방금 만든 이미지를 실행하여 의도대로 동작하는지 확인합니다.
- **`docker run`**: 컨테이너를 실행하는 명령어
- **`--rm`**: 컨테이너 실행이 끝나면 자동으로 삭제하는 옵션
- **`my-hello-image:1.0`**: 실행할 이미지의 이름과 태그
> 💡 화면에 "Hello Docker!"가 출력되면 이미지 빌드와 실행이 모두 성공한 것입니다.
```

**5) 실습 종료**

```bash
: quit
```

```tech
bash,rocky
```

```desc
#### 👋 실습 종료
실습을 종료를 의미하는 `quit` 명령어를 실행합니다.
현재 터미널 세션을 종료합니다.

> 💡 모든 실습을 마친 후 사용합니다.
```